<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="shared-styles.html">
<link rel="import" href="../bower_components/app-route/app-location.html">
<link rel="import" href="../bower_components/app-route/app-route.html">
<link rel="import" href="components/jetscape-navigation.html">
<link rel="import" href="../bower_components/paper-input/paper-input.html">
<link rel="import" href="../bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../bower_components/neon-animation/web-animations.html">
<link rel="import" href="../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../bower_components/paper-item/paper-item.html">
<link rel="import" href="../bower_components/vaadin-date-picker/vaadin-date-picker.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">


<dom-module id="my-refund-order">
  <template>
    <style include="shared-styles">
    :host {
        display: block;
    }
    .hidden-modal{
        display:none
    }
    paper-dropdown-menu {
        width: 200px;
        margin-right: 20px;
    }
    </style>

    <iron-ajax
      id="ajax3"
      method="GET"
      url="https://api.jetscape.club/getOrderItem"
      headers='{"Content-Type": "application/json"}' 
      loading="{{loading}}"
      handle-as="json"
      params="{{getParams3}}"
      on-response="_handleResponse3"
      debounce-duration="300">
    </iron-ajax>

    <app-location route="{{route}}"></app-location>
    <app-route
        route="{{route}}"
        pattern="/refund-order/:page"
        data="{{routeData}}"
        tail="{{subroute}}"></app-route>

<jetscape-navigation></jetscape-navigation>

      <div class="container" id="container">
        <template is="dom-repeat" items="{{orderItems}}">
            <p>
            Item ID: {{item.order_item_id}}</br></br>
            Title: {{item.product_title}}</br></br>
            Price: {{item.item_price}}</br></br>
            Quantity: {{item.quantity}}</br></br>
            Merchant SKU:  {{item.merchant_sku}}</br></br>
            ================================
send to /rma as POST body
<pre> 
{
  jwttoken = jwttoken,
  orderId = orderId,
  items = [
    {order_item_id:order_item_id, returned_quantity:quantity, refund quantity: price, tax_concessions: tax_concessions, shipping_concessions:shipping_concessions},
    {order_item_id:order_item_id, returned_quantity:quantity, refund quantity: price, tax_concessions: tax_concessions, shipping_concessions:shipping_concessions},
  ]
}
</pre> 
            </p>
        </template>
      </div>
  </template>

  <script>
    class MyRefundOrder extends Polymer.Element {
        static get is() { return 'my-refund-order'; }
        static get properties() {
          return {
            mobileScreen: {
              type: String,
              observer: '_mobile'
            },
            loading:{
              type: Boolean,
              value: false
            },
            putBody:{
              type:Object,
              value:{foo:"bar"}
            },
            buttonWidth:{
              type: String,
              value:'mobile-button-width'
            },
            animationConfig: {
            value: function() {
              return {
                'entry': {
                  name: 'fade-in-animation',
                  node: this,
                  nodeDelay: 300,
                  timing:{duration:300}
                },
                'exit': {
                  name: 'fade-out-animation',
                  node: this,
                  nodeDelay: 300,
                  timing:{duration:300}
                }
              }
            }
          }
          };
        }

    ready(){
        super.ready()
        const orderId = this.routeData.page
        this.getParams3 = {jwttoken: localStorage.getItem("jwt"), orderId: orderId}
        this.$.ajax3.generateRequest();
    }
      _handleResponse3(e) {
        this.orderItems = e.detail.response.data
        console.log(this.orderItems)
      }

    } window.customElements.define(MyRefundOrder.is, MyRefundOrder);


  </script>
</dom-module>



